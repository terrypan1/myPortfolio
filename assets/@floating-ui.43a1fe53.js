function S(t){return t.split("-")[0]}function M(t){return t.split("-")[1]}function $(t){return["top","bottom"].includes(S(t))?"x":"y"}function J(t){return t==="y"?"height":"width"}function j(t,n,e){let{reference:i,floating:o}=t;const s=i.x+i.width/2-o.width/2,c=i.y+i.height/2-o.height/2,r=$(n),l=J(r),f=i[l]/2-o[l]/2,h=S(n),a=r==="x";let u;switch(h){case"top":u={x:s,y:i.y-o.height};break;case"bottom":u={x:s,y:i.y+i.height};break;case"right":u={x:i.x+i.width,y:c};break;case"left":u={x:i.x-o.width,y:c};break;default:u={x:i.x,y:i.y}}switch(M(n)){case"start":u[r]-=f*(e&&a?-1:1);break;case"end":u[r]+=f*(e&&a?-1:1);break}return u}const it=async(t,n,e)=>{const{placement:i="bottom",strategy:o="absolute",middleware:s=[],platform:c}=e,r=s.filter(Boolean),l=await(c.isRTL==null?void 0:c.isRTL(n));let f=await c.getElementRects({reference:t,floating:n,strategy:o}),{x:h,y:a}=j(f,i,l),u=i,d={},g=0;for(let p=0;p<r.length;p++){const{name:O,fn:k}=r[p],{x:V,y:C,data:T,reset:w}=await k({x:h,y:a,initialPlacement:i,placement:u,strategy:o,middlewareData:d,rects:f,platform:c,elements:{reference:t,floating:n}});if(h=V!=null?V:h,a=C!=null?C:a,d={...d,[O]:{...d[O],...T}},w&&g<=50){g++,typeof w=="object"&&(w.placement&&(u=w.placement),w.rects&&(f=w.rects===!0?await c.getElementRects({reference:t,floating:n,strategy:o}):w.rects),{x:h,y:a}=j(f,u,l)),p=-1;continue}}return{x:h,y:a,placement:u,strategy:o,middlewareData:d}};function rt(t){return{top:0,right:0,bottom:0,left:0,...t}}function st(t){return typeof t!="number"?rt(t):{top:t,right:t,bottom:t,left:t}}function Y(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}const ct=Math.min,lt=Math.max;function ft(t,n,e){return lt(t,ct(n,e))}const Rt=t=>({name:"arrow",options:t,async fn(n){const{element:e,padding:i=0}=t!=null?t:{},{x:o,y:s,placement:c,rects:r,platform:l}=n;if(e==null)return{};const f=st(i),h={x:o,y:s},a=$(c),u=M(c),d=J(a),g=await l.getDimensions(e),p=a==="y"?"top":"left",O=a==="y"?"bottom":"right",k=r.reference[d]+r.reference[a]-h[a]-r.floating[d],V=h[a]-r.reference[a],C=await(l.getOffsetParent==null?void 0:l.getOffsetParent(e));let T=C?a==="y"?C.clientHeight||0:C.clientWidth||0:0;T===0&&(T=r.floating[d]);const w=k/2-V/2,H=f[p],_=T-g[d]-f[O],L=T/2-g[d]/2+w,B=ft(H,L,_),ot=(u==="start"?f[p]:f[O])>0&&L!==B&&r.reference[d]<=r.floating[d]?L<H?H-L:_-L:0;return{[a]:h[a]-ot,data:{[a]:B,centerOffset:L-B}}}});async function at(t,n){const{placement:e,platform:i,elements:o}=t,s=await(i.isRTL==null?void 0:i.isRTL(o.floating)),c=S(e),r=M(e),l=$(e)==="x",f=["left","top"].includes(c)?-1:1,h=s&&l?-1:1,a=typeof n=="function"?n(t):n;let{mainAxis:u,crossAxis:d,alignmentAxis:g}=typeof a=="number"?{mainAxis:a,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...a};return r&&typeof g=="number"&&(d=r==="end"?g*-1:g),l?{x:d*h,y:u*f}:{x:u*f,y:d*h}}const Ot=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(n){const{x:e,y:i}=n,o=await at(n,t);return{x:e+o.x,y:i+o.y,data:o}}}};function K(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function x(t){if(t==null)return window;if(!K(t)){const n=t.ownerDocument;return n&&n.defaultView||window}return t}function m(t){return x(t).getComputedStyle(t)}function b(t){return K(t)?"":t?(t.nodeName||"").toLowerCase():""}function Q(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(n=>n.brand+"/"+n.version).join(" "):navigator.userAgent}function y(t){return t instanceof x(t).HTMLElement}function R(t){return t instanceof x(t).Element}function ut(t){return t instanceof x(t).Node}function I(t){if(typeof ShadowRoot>"u")return!1;const n=x(t).ShadowRoot;return t instanceof n||t instanceof ShadowRoot}function E(t){const{overflow:n,overflowX:e,overflowY:i,display:o}=m(t);return/auto|scroll|overlay|hidden/.test(n+i+e)&&!["inline","contents"].includes(o)}function dt(t){return["table","td","th"].includes(b(t))}function F(t){const n=/firefox/i.test(Q()),e=m(t),i=e.backdropFilter||e.WebkitBackdropFilter;return e.transform!=="none"||e.perspective!=="none"||(i?i!=="none":!1)||n&&e.willChange==="filter"||n&&(e.filter?e.filter!=="none":!1)||["transform","perspective"].some(o=>e.willChange.includes(o))||["paint","layout","strict","content"].some(o=>{const s=e.contain;return s!=null?s.includes(o):!1})}function Z(){return!/^((?!chrome|android).)*safari/i.test(Q())}function X(t){return["html","body","#document"].includes(b(t))}const z=Math.min,D=Math.max,W=Math.round;function A(t,n,e){var i,o,s,c;n===void 0&&(n=!1),e===void 0&&(e=!1);const r=t.getBoundingClientRect();let l=1,f=1;n&&y(t)&&(l=t.offsetWidth>0&&W(r.width)/t.offsetWidth||1,f=t.offsetHeight>0&&W(r.height)/t.offsetHeight||1);const h=R(t)?x(t):window,a=!Z()&&e,u=(r.left+(a&&(i=(o=h.visualViewport)==null?void 0:o.offsetLeft)!=null?i:0))/l,d=(r.top+(a&&(s=(c=h.visualViewport)==null?void 0:c.offsetTop)!=null?s:0))/f,g=r.width/l,p=r.height/f;return{width:g,height:p,top:d,right:u+g,bottom:d+p,left:u,x:u,y:d}}function v(t){return((ut(t)?t.ownerDocument:t.document)||window.document).documentElement}function N(t){return R(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function tt(t){return A(v(t)).left+N(t).scrollLeft}function ht(t){const n=A(t);return W(n.width)!==t.offsetWidth||W(n.height)!==t.offsetHeight}function gt(t,n,e){const i=y(n),o=v(n),s=A(t,i&&ht(n),e==="fixed");let c={scrollLeft:0,scrollTop:0};const r={x:0,y:0};if(i||!i&&e!=="fixed")if((b(n)!=="body"||E(o))&&(c=N(n)),y(n)){const l=A(n,!0);r.x=l.x+n.clientLeft,r.y=l.y+n.clientTop}else o&&(r.x=tt(o));return{x:s.left+c.scrollLeft-r.x,y:s.top+c.scrollTop-r.y,width:s.width,height:s.height}}function P(t){if(b(t)==="html")return t;const n=t.assignedSlot||t.parentNode||(I(t)?t.host:null)||v(t);return I(n)?n.host:n}function U(t){return!y(t)||m(t).position==="fixed"?null:t.offsetParent}function pt(t){let n=P(t);for(;y(n)&&!X(n);){if(F(n))return n;n=P(n)}return null}function q(t){const n=x(t);let e=U(t);for(;e&&dt(e)&&m(e).position==="static";)e=U(e);return e&&(b(e)==="html"||b(e)==="body"&&m(e).position==="static"&&!F(e))?n:e||pt(t)||n}function wt(t){if(y(t))return{width:t.offsetWidth,height:t.offsetHeight};const n=A(t);return{width:n.width,height:n.height}}function mt(t){let{rect:n,offsetParent:e,strategy:i}=t;const o=y(e),s=v(e);if(e===s)return n;let c={scrollLeft:0,scrollTop:0};const r={x:0,y:0};if((o||!o&&i!=="fixed")&&((b(e)!=="body"||E(s))&&(c=N(e)),y(e))){const l=A(e,!0);r.x=l.x+e.clientLeft,r.y=l.y+e.clientTop}return{...n,x:n.x-c.scrollLeft+r.x,y:n.y-c.scrollTop+r.y}}function yt(t,n){const e=x(t),i=v(t),o=e.visualViewport;let s=i.clientWidth,c=i.clientHeight,r=0,l=0;if(o){s=o.width,c=o.height;const f=Z();(f||!f&&n==="fixed")&&(r=o.offsetLeft,l=o.offsetTop)}return{width:s,height:c,x:r,y:l}}function xt(t){var n;const e=v(t),i=N(t),o=(n=t.ownerDocument)==null?void 0:n.body,s=D(e.scrollWidth,e.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),c=D(e.scrollHeight,e.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0);let r=-i.scrollLeft+tt(t);const l=-i.scrollTop;return m(o||e).direction==="rtl"&&(r+=D(e.clientWidth,o?o.clientWidth:0)-s),{width:s,height:c,x:r,y:l}}function nt(t){const n=P(t);return X(n)?t.ownerDocument.body:y(n)&&E(n)?n:nt(n)}function et(t,n){var e;n===void 0&&(n=[]);const i=nt(t),o=i===((e=t.ownerDocument)==null?void 0:e.body),s=x(i),c=o?[s].concat(s.visualViewport||[],E(i)?i:[]):i,r=n.concat(c);return o?r:r.concat(et(c))}function bt(t,n){const e=A(t,!1,n==="fixed"),i=e.top+t.clientTop,o=e.left+t.clientLeft;return{top:i,left:o,x:o,y:i,right:o+t.clientWidth,bottom:i+t.clientHeight,width:t.clientWidth,height:t.clientHeight}}function G(t,n,e){return n==="viewport"?Y(yt(t,e)):R(n)?bt(n,e):Y(xt(v(t)))}function vt(t){let n=et(t).filter(s=>R(s)&&b(s)!=="body"),e=null;const i=m(t).position==="fixed";let o=i?P(t):t;for(;R(o)&&!X(o);){const s=m(o),c=F(o);(i?!c&&!e:!c&&s.position==="static"&&!!e&&["absolute","fixed"].includes(e.position))?n=n.filter(l=>l!==o):e=s,o=P(o)}return n}function At(t){let{element:n,boundary:e,rootBoundary:i,strategy:o}=t;const c=[...e==="clippingAncestors"?vt(n):[].concat(e),i],r=c[0],l=c.reduce((f,h)=>{const a=G(n,h,o);return f.top=D(a.top,f.top),f.right=z(a.right,f.right),f.bottom=z(a.bottom,f.bottom),f.left=D(a.left,f.left),f},G(n,r,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}const Ct={getClippingRect:At,convertOffsetParentRelativeRectToViewportRelativeRect:mt,isElement:R,getDimensions:wt,getOffsetParent:q,getDocumentElement:v,async getElementRects(t){let{reference:n,floating:e,strategy:i}=t;const o=this.getOffsetParent||q,s=this.getDimensions;return{reference:gt(n,await o(e),i),floating:{x:0,y:0,...await s(e)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>m(t).direction==="rtl"},Dt=(t,n,e)=>it(t,n,{platform:Ct,...e});export{Rt as a,Dt as c,Ot as o};
